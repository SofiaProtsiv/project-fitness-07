import{A as q}from"./index-a55b2bd8.js";import{a as x,b as A,d as S,s as F}from"./card-holder-a6e54a50.js";import{i as I}from"./index-9f70aade.js";const f=document.querySelector(".header__auth_btn"),c=document.querySelector(".authModal__backdrop"),w=document.querySelector(".authModal__button-close"),g=document.querySelector(".authForm"),L=document.querySelector(".action__text"),r=document.querySelector(".action__button"),p=document.querySelector(".authForm__fieldset.username"),b=document.querySelector(".authForm__title"),_=document.querySelectorAll(".header__nav-authorized"),k=document.querySelectorAll(".header__nav__item.auth"),u=document.querySelectorAll(".header__logout_btn");let d=!0;const l=()=>{c.classList.remove("open"),w.removeEventListener("click",l),f.addEventListener("click",y),document.body.style.overflow="visible"},y=()=>{c.classList.add("open"),w.addEventListener("click",l),f.removeEventListener("click",y),document.body.style.overflow="hidden"},h=()=>{g.reset()},R=async e=>{var n;e.preventDefault();const t=[...g.elements].reduce((s,i)=>(i.name&&(s[i.name]=i.value),s),{});d&&await x(t),await A(t),h(),(n=await S.auth().currentUser)==null||n.displayName,l()},T=()=>{d?(r.textContent="Registration",p.classList.add("hidden"),r.setAttribute("data-action","log_in"),b.textContent="Log in",L.textContent="Don't have an account?",h(),d=!1):(r.textContent="Log in",r.setAttribute("data-action","reg"),p.classList.remove("hidden"),b.textContent="Registration",L.textContent="Already have an account?",h(),d=!0),g.elements.name.toggleAttribute("required")},B=async()=>{await S.auth().onAuthStateChanged(e=>{e?(k.forEach(t=>{t.classList.add("hidden")}),u.forEach(t=>{t.classList.add("visible")}),_.forEach(t=>{t.classList.add("visible")})):(k.forEach(t=>{t.classList.remove("hidden")}),u.forEach(t=>{t.classList.remove("visible")}),_.forEach(t=>{t.classList.remove("visible")}))})},$=async()=>{await F(),u.forEach(e=>{e.classList.add("hidden")}),window.location.pathname="/"};f.addEventListener("click",y);g.addEventListener("submit",R);r.addEventListener("click",T);u.forEach(e=>{e.addEventListener("click",$)});document.addEventListener("keydown",e=>{e.key==="Escape"&&l()});c.addEventListener("click",e=>{e.target===c&&l()});B();function H(){const e=document.querySelector(".hero__hashtags-wrap"),t=document.createElement("ul");t.classList.add("hashtags__list");const n=["Sport","Healthy","Workout","Diet"].map(s=>`
  <li class='hashtags__item'>#${s}</li>
`).join("");t.innerHTML=n,e.insertAdjacentElement("beforeend",t)}window.addEventListener("load",H);const o={exersiseId:"64f389465ae26083f39b17a2",ratingText:"Rating",iconStar:"/images/icons-sprite.svg#icon-star",ratingMax:5,closeKeyBoardBtn:"Escape",beforeOpen:null,afterOpen:null,beforeClose:null,afterClose:null},O=document.querySelector("form.modal-form"),m=document.querySelector(".rating-modal-window"),j=document.querySelector(".rating-close"),D=()=>{const e=[];for(let t=0;t<o.ratingMax;t++){let n=o.ratingMax-t;e.push(`
        <input type="radio" class="visually-hidden" id="star${n}" name="rating" value="${n}">
        <label class="rating-star" for="star${n}">
            <svg class="rating-star-icon">
                <use href=${o.iconStar} />
            </svg>
        </label>
        `)}return`
    <div class="rating-wrapper">
        <p class="rating-text">${o.ratingText}</p>
        <div class="rating-stars">
            ${e.join("")}
            <p class="rating-count">0.0</p>
        </div>
    </div>
    `},M=e=>{e.key===o.closeKeyBoardBtn&&v()},C=e=>{E.forEach(t=>{delete t.dataset.dataChecked}),e.target.dataset.dataChecked="checked",U.innerHTML=e.target.value};O.insertAdjacentHTML("afterbegin",D());const E=document.querySelectorAll(".rating-stars input"),U=document.querySelector(".rating-count"),v=()=>{E.forEach(e=>{e.removeEventListener("change",C)}),m.classList.remove("open"),document.body.style.overflow="visible",document.removeEventListener("keydown",M)},K=()=>{m.classList.add("open"),document.body.style.overflow="hidden",document.addEventListener("keydown",M),E.forEach(e=>{e.addEventListener("change",C)})};j.addEventListener("click",v);m.addEventListener("click",e=>{e.target===m&&v()});const W={modalConfig:o,openRatingModal:K,closeRatingModal:v},a={form:document.querySelector(".modal-form"),ratings:document.querySelectorAll(".rating-stars input"),emailInput:document.querySelector(".modal-form-email"),validateEmailMessage:document.querySelector(".modal-email-validate"),btn:document.querySelector(".feedback-submit")};a.form.addEventListener("submit",z);async function z(e){e.preventDefault();const t=e.target.elements.email.value.trim().toLowerCase();if(I(t))try{const n=new q;let s=Array.from(a.ratings).find(i=>i.dataset.dataChecked);n.rating=parseInt(s.value),n.email=t,n.review=a.validateEmailMessage.value,n.exerciseId=W.modalConfig.exersiseId,await n.addRating(),a.validateEmailMessage.textContent="✅ Thank you for you subscription",a.validateEmailMessage.classList.remove("full_hidden","validate-form-message"),a.validateEmailMessage.classList.add("validate-form-message_ok"),console.log("ok"),e.target.reset()}catch(n){console.log(n),a.validateEmailMessage.textContent="⚠️ This email address was previously added",a.validateEmailMessage.classList.remove("full_hidden","validate-form-message_ok"),a.validateEmailMessage.classList.add("validate-form-message_warning")}else a.validateEmailMessage.textContent="⚠️ Your email has wrong format",a.validateEmailMessage.classList.remove("full_hidden","validate-form-message_ok"),a.validateEmailMessage.classList.add("validate-form-message_warning")}a.emailInput.addEventListener("input",G);function G(e){e.target.value.trim()?a.btn.disabled=!1:a.btn.disabled=!0}a.emailInput.addEventListener("focus",N);function N(){a.validateEmailMessage.classList.add("full_hidden")}
